CREATE DEFINER=`root`@`localhost` PROCEDURE `get_books`(in bookName varchar(100), in author varchar(100), in category_id varchar(100), in publisher varchar(100), in published_year varchar(100))
BEGIN
	set @sql_select = "select * from book where 1=1";
    if `bookName` != "" then
		set @sql_select = concat(@sql_select, " and name like '%", bookName, "%'");
    end if;
    if `author` != "" then
		set @sql_select = concat(@sql_select, " and author like '%", author, "%'");
	end if;
    if `category_id` != "" && `category_id` != 0 then
		set @sql_select = concat(@sql_select, " and category_id = ", category_id);
    end if;
    if `publisher` != "" then
		set @sql_select = concat(@sql_select, " and publisher like '%", publisher, "%'");
	end if;
    if `published_year` != "" then
		set @sql_select = concat(@sql_select, " and published_year like '%", published_year, "%'");
    end if;
    set @sql_select = concat(@sql_select, " order by id desc");
    prepare query_data from @sql_select;
    execute query_data;
    deallocate prepare query_data;
    select @sql_select;
END